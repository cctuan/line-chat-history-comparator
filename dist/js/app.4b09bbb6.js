webpackJsonp([1],{"+VGo":function(t,n){},0:function(t,n,e){t.exports=e("NHnr")},KxlP:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("/5sW"),r=(e("beEN"),e("SldL"),e("7hDC")),o=e.n(r),i={name:"ChatTitle",components:{},props:{title:{type:String},totalColumns:{type:Number,default:1}},computed:{containerStyles:function(){return{width:"".concat(100/this.totalColumns,"%")}}}},s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-title",style:t.containerStyles},[t._v("\n  "+t._s(t.title)+"\n")])},u=[],c=e("XyMi");function l(t){e("x2pw")}var f=!1,h=l,m="data-v-4e286c58",p=null,d=Object(c["a"])(i,s,u,f,h,m,p),y=d.exports,g={name:"ChatColumnLayout",components:{},props:{totalColumns:{type:Number},chat:{type:Object,default:function(){return{}}},height:{type:Number}},computed:{containerStyles:function(){return{width:"".concat(100/this.totalColumns,"%")}},styles:function(){return{}}}},C=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-container",style:t.containerStyles},[e("h4",[t._v("與"+t._s(t.chat.info.name)+"對話")]),e("section",{staticClass:"chat-column",style:t.styles})])},v=[];function _(t){e("yAOV")}var x=!1,w=_,b="data-v-9fd38574",D=null,S=Object(c["a"])(g,C,v,x,w,b,D),E=S.exports,N=function(t){return t>10?t+"":"0"+t},O=function(t){var n=new Date(t);return"".concat(N(n.getHours()),":").concat(N(n.getMinutes()))},T={name:"ChatDayBlock",props:{message:{type:Object,default:function(){return{}}},totalColumns:{type:Number,default:1}},computed:{className:function(){return this.message.isSelf?"message-out":"message-in"},position:function(){return this.message.position||0},hourMins:function(){return O(this.message.time)},messageStyles:function(){var t=100/this.totalColumns;return{width:"".concat(t/2,"%"),marginLeft:this.message.isSelf?"".concat(this.position*(100/this.totalColumns)+t/2-2,"%"):"".concat(this.position*(100/this.totalColumns),"%")}}}},j=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",{staticClass:"message",class:t.className,style:t.messageStyles},[t._v("\n  "+t._s(t.message.content)+"\n  "),e("span",{staticClass:"time"},[t._v(t._s(t.hourMins))])])},k=[];function M(t){e("KxlP")}var $=!1,R=M,B="data-v-b0f51bd4",L=null,z=Object(c["a"])(T,j,k,$,R,B,L),A=z.exports,F={name:"ChatDayBlock",components:{ChatItem:A},props:{totalColumns:{type:Number},chatDay:{type:Object,default:function(){return{}}}},computed:{containerStyles:function(){return{width:"100%"}},messages:function(){return this.chatDay.content},dayTitle:function(){var t=new Date(this.chatDay.time);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}}},J=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-day-container",style:t.containerStyles},[e("h5",[t._v(t._s(t.dayTitle))]),t._l(t.messages,function(n,a){return e("ChatItem",{key:a,attrs:{message:n,totalColumns:t.totalColumns}})})],2)},V=[];function G(t){e("zhYS")}var H=!1,I=G,P="data-v-37a134a7",Y=null,K=Object(c["a"])(F,J,V,H,I,P,Y),W=K.exports,X={totalColumn:0,merged:[],allChat:[]},q=e("rzQm"),Q=e.n(q),U=(e("WpTh"),e("EuXz"),e("Biqn")),Z=e.n(U),tt=function(t,n){return new Date(t)-new Date(n)<0},nt=function(t,n){return new Date(t)-new Date(n)==0},et=function(t,n){return t.map(function(t){return t.content=t.content.map(function(t){return Z()({},t,{position:n})}),t})},at=function(t){try{return JSON.parse(JSON.stringify(t))}catch(t){return{}}},rt=function t(n,e){var a=at(n),r=at(e),o=r.length+a.length,i=[],s=0,u=0;while(i.length<o)a.length!==u&&a[u]?r.length!==s&&r[s]?tt(a[u].time,r[s].time)?i.push(a[u++]):nt(a[u].time,r[s].time)?(r[s].content=t(a[u].content,r[s].content),i.push(r[s++]),u++):i.push(r[s++]):i.push(a[u++]):i.push(r[s++]);return i.filter(function(t){return!!t})},ot=function(t){var n=t.info.name,e=X.allChat.find(function(t){return t.info.name===n});if(!e){var a,r=X.allChat.length;if(t.history=et(t.history,r),0===X.merged.length)(a=X.merged).push.apply(a,Q()(t.history));else X.merged=rt(X.merged,t.history,r);X.allChat.push(t),X.totalColumn+=1}},it=function(t){t.length?t.forEach(ot):ot(t),console.log(X)},st=e("NM/j"),ut=e.n(st),ct=(e("mJx5"),RegExp(/\[LINE\] 與(.*)的聊天記錄/)),lt=RegExp(/^(\d{4}\/\d{2}\/\d{2})（[一ㄧ二二三三四四五五六六日日]）/),ft=RegExp(/^(上午|下午)(\d{2}:\d{2})\t(.+)\t(.*)/),ht=function(t){return new Date(t.substring("儲存日期： "))},mt=function(t){var n={};return t.split(/\r?\n/).forEach(function(t){var e=ct.exec(t);e&&e[0]?n.name=e[1]:0!==t.indexOf("儲存日期")||(n.saved=ht(t))}),n},pt=function(t,n,e){var a=ut()(t,5),r=a[1],o=a[2],i=a[3],s=a[4],u=new Date(n+" "+o+" GMT+0800 (CST)");return"下午"===r&&u.setTime(u.getTime()+432e5),{time:u,source:i,isSelf:i!==e,content:s}},dt=function(t,n,e){return t.split(/\r\n/).map(function(t){var a=ft.exec(t);return a&&a.length?pt(a,n,e):null}).filter(function(t){return t})},yt=function(t){var n={},e=t.split(/\d{4}\/\d{2}\/\d{2}（[一ㄧ二二三三四四五五六六日日]）/);if(e.length){n.info=mt(e.shift());var a=t.split(/\r?\n/).map(function(t){var n=lt.exec(t);return!(!n||!n.length)&&n[1]}).filter(function(t){return t});return n.history=a.map(function(t,a){return{type:"chat",time:t,content:dt(e[a],t,n.info.name)}}),n}},gt=function(t){return yt(t)},Ct=gt,vt={name:"app",components:{ChatColumnLayout:E,ChatDayBlock:W,ChatTitle:y},data:function(){return{chats:X}},computed:{allChat:function(){return this.chats.allChat||[]},totalColumns:function(){return this.chats.totalColumn||0},mergedChats:function(){return this.chats.merged||[]}},mounted:function(){var t=this;this.$nextTick(function(){t.loadExternal()})},methods:{loadExternal:function(){var t=o()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onFileChane:function(t){var n=t.target.files;Array.from(n).forEach(function(t){var n=new FileReader;n.onload=function(t){var n=Ct(t.target.result);it(n)},n.readAsText(t)})}}},_t=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("div",[e("input",{attrs:{type:"file",id:"input",multiple:""},on:{change:t.onFileChane}})]),e("div",{staticClass:"title-container"},[t._l(t.allChat,function(n,a){return e("ChatTitle",{key:"chat-title-"+a,attrs:{title:n.info.name,totalColumns:t.totalColumns}})}),e("div",{staticClass:"clean"})],2),t._l(t.mergedChats,function(n,a){return e("ChatDayBlock",{key:"chat-item-"+a,attrs:{chatDay:n,totalColumns:t.totalColumns}})})],2)},xt=[];function wt(t){e("+VGo")}var bt=!1,Dt=wt,St=null,Et=null,Nt=Object(c["a"])(vt,_t,xt,bt,Dt,St,Et),Ot=Nt.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(Ot)}}).$mount("#app")},x2pw:function(t,n){},yAOV:function(t,n){},zhYS:function(t,n){}},[0]);
//# sourceMappingURL=app.4b09bbb6.js.map