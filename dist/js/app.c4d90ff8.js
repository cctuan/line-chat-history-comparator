webpackJsonp([1],{"+VGo":function(t,n){},0:function(t,n,e){t.exports=e("NHnr")},IqNS:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("/5sW"),r=(e("beEN"),e("SldL"),e("7hDC")),o=e.n(r),i={name:"ChatTitle",components:{},props:{title:{type:String},totalColumns:{type:Number,default:1}},computed:{containerStyles:function(){return{width:"".concat(100/this.totalColumns,"%")}}}},s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-title",style:t.containerStyles},[t._v("\n  "+t._s(t.title)+"\n")])},u=[],c=e("XyMi");function l(t){e("x2pw")}var h=!1,f=l,m="data-v-4e286c58",p=null,d=Object(c["a"])(i,s,u,h,f,m,p),y=d.exports,C={name:"ChatColumnLayout",components:{},props:{totalColumns:{type:Number},chat:{type:Object,default:function(){return{}}},height:{type:Number}},computed:{containerStyles:function(){return{width:"".concat(100/this.totalColumns,"%")}},styles:function(){return{}}}},g=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-container",style:t.containerStyles},[e("h4",[t._v("與"+t._s(t.chat.info.name)+"對話")]),e("section",{staticClass:"chat-column",style:t.styles})])},v=[];function _(t){e("yAOV")}var x=!1,w=_,S="data-v-9fd38574",b=null,D=Object(c["a"])(C,g,v,x,w,S,b),E=D.exports,N={name:"ChatDayBlock",props:{message:{type:Object,default:function(){return{}}},totalColumns:{type:Number,default:1}},computed:{className:function(){return this.message.isSelf?"message-out":"message-in"},position:function(){return this.message.position||0},messageStyles:function(){var t=100/this.totalColumns;return{width:"".concat(t/2,"%"),marginLeft:this.message.isSelf?"".concat(this.position*(100/this.totalColumns)+t/2-2,"%"):"".concat(this.position*(100/this.totalColumns),"%")}}}},O=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",{staticClass:"message",class:t.className,style:t.messageStyles},[t._v("\n  "+t._s(t.message.content)+"\n")])},T=[];function j(t){e("IqNS")}var k=!1,$=j,R="data-v-c6c00d82",B=null,I=Object(c["a"])(N,O,T,k,$,R,B),L=I.exports,M={name:"ChatDayBlock",components:{ChatItem:L},props:{totalColumns:{type:Number},chatDay:{type:Object,default:function(){return{}}}},computed:{containerStyles:function(){return{width:"100%"}},messages:function(){return this.chatDay.content},dayTitle:function(){var t=new Date(this.chatDay.time);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}}},z=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"chat-day-container",style:t.containerStyles},[e("h5",[t._v(t._s(t.dayTitle))]),t._l(t.messages,function(n,a){return e("ChatItem",{key:a,attrs:{message:n,totalColumns:t.totalColumns}})})],2)},A=[];function F(t){e("zhYS")}var J=!1,V=F,q="data-v-37a134a7",G=null,Y=Object(c["a"])(M,z,A,J,V,q,G),H=Y.exports,W={totalColumn:0,merged:[],allChat:[]},X=e("rzQm"),P=e.n(X),Q=(e("WpTh"),e("EuXz"),e("Biqn")),K=e.n(Q),U=function(t,n){return new Date(t)-new Date(n)<0},Z=function(t,n){return new Date(t)-new Date(n)==0},tt=function(t,n){return t.map(function(t){return t.content=t.content.map(function(t){return K()({},t,{position:n})}),t})},nt=function(t){try{return JSON.parse(JSON.stringify(t))}catch(t){return{}}},et=function t(n,e){var a=nt(n),r=nt(e),o=r.length+a.length,i=[],s=0,u=0;while(i.length<o)a.length!==u&&a[u]?r.length!==s&&r[s]?U(a[u].time,r[s].time)?i.push(a[u++]):Z(a[u].time,r[s].time)?(r[s].content=t(a[u].content,r[s].content),i.push(r[s++]),u++):i.push(r[s++]):i.push(a[u++]):i.push(r[s++]);return i.filter(function(t){return!!t})},at=function(t){var n=t.info.name,e=W.allChat.find(function(t){return t.info.name===n});if(!e){var a,r=W.allChat.length;if(t.history=tt(t.history,r),0===W.merged.length)(a=W.merged).push.apply(a,P()(t.history));else W.merged=et(W.merged,t.history,r);W.allChat.push(t),W.totalColumn+=1}},rt=function(t){t.length?t.forEach(at):at(t),console.log(W)},ot=e("NM/j"),it=e.n(ot),st=(e("mJx5"),RegExp(/\[LINE\] 與(.*)的聊天記錄/)),ut=RegExp(/^(\d{4}\/\d{2}\/\d{2})（[一ㄧ二二三三四四五五六六日日]）/),ct=RegExp(/^(上午|下午)(\d{2}:\d{2})\t(.+)\t(.*)/),lt=function(t){return new Date(t.substring("儲存日期： "))},ht=function(t){var n={};return t.split(/\r?\n/).forEach(function(t){var e=st.exec(t);e&&e[0]?n.name=e[1]:0!==t.indexOf("儲存日期")||(n.saved=lt(t))}),n},ft=function(t,n,e){var a=it()(t,5),r=a[1],o=a[2],i=a[3],s=a[4],u=new Date(n+" "+o+" GMT+0800 (CST)");return"下午"===r&&u.setTime(u.getTime()+432e5),{time:u,source:i,isSelf:i!==e,content:s}},mt=function(t,n,e){return t.split(/\r\n/).map(function(t){var a=ct.exec(t);return a&&a.length?ft(a,n,e):null}).filter(function(t){return t})},pt=function(t){var n={},e=t.split(/\d{4}\/\d{2}\/\d{2}（[一ㄧ二二三三四四五五六六日日]）/);if(e.length){n.info=ht(e.shift());var a=t.split(/\r?\n/).map(function(t){var n=ut.exec(t);return!(!n||!n.length)&&n[1]}).filter(function(t){return t});return n.history=a.map(function(t,a){return{type:"chat",time:t,content:mt(e[a],t,n.info.name)}}),n}},dt=function(t){return pt(t)},yt=dt,Ct={name:"app",components:{ChatColumnLayout:E,ChatDayBlock:H,ChatTitle:y},data:function(){return{chats:W}},computed:{allChat:function(){return this.chats.allChat||[]},totalColumns:function(){return this.chats.totalColumn||0},mergedChats:function(){return this.chats.merged||[]}},mounted:function(){var t=this;this.$nextTick(function(){t.loadExternal()})},methods:{loadExternal:function(){var t=o()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onFileChane:function(t){var n=t.target.files;Array.from(n).forEach(function(t){var n=new FileReader;n.onload=function(t){var n=yt(t.target.result);rt(n)},n.readAsText(t)})}}},gt=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("div",[e("input",{attrs:{type:"file",id:"input",multiple:""},on:{change:t.onFileChane}})]),e("div",{staticClass:"title-container"},[t._l(t.allChat,function(n,a){return e("ChatTitle",{key:"chat-title-"+a,attrs:{title:n.info.name,totalColumns:t.totalColumns}})}),e("div",{staticClass:"clean"})],2),t._l(t.mergedChats,function(n,a){return e("ChatDayBlock",{key:"chat-item-"+a,attrs:{chatDay:n,totalColumns:t.totalColumns}})})],2)},vt=[];function _t(t){e("+VGo")}var xt=!1,wt=_t,St=null,bt=null,Dt=Object(c["a"])(Ct,gt,vt,xt,wt,St,bt),Et=Dt.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(Et)}}).$mount("#app")},x2pw:function(t,n){},yAOV:function(t,n){},zhYS:function(t,n){}},[0]);
//# sourceMappingURL=app.c4d90ff8.js.map